---
import Title from "../Title.astro";
---

<section
  class="w-full md:max-w-7xl mx-auto px-5 py-20 flex flex-col items-center justify-center"
>
  <Title
    title="No se detienen"
    subtitle="Las obras en manarola"
    align="text-center"
    size="text-3xl md:text-[3rem]"
  />
  <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
    <div class="p-5 md:p-10 animation-bottom">
      <img src="/images/actividad-1.avif" alt="Primera etapa" loading="lazy" />
      <div class="p-5 mt-2">
        <span
          class="text-sm uppercase font-medium tracking-[0.2em] text-secondary"
          >Culminado</span
        >
        <h3
          class="font-normal mt-4 md:max-w-3xl leading-snug md:mx-auto text-accent text-[1.5rem]"
        >
          Primera parte
        </h3>
        <p class="mt-5 text-[15px]">
          Esta etapa fue muy importante, ya que nos permitió otorgar la
          seguridad fiscal que los propietarios de Manarola desean.
        </p>
        <ul class="list-disc ml-5 mt-2 text-[15px]">
          <li>
            Adquisición del terreno
            <span
              class="text-secondary uppercase text-xs cursor-pointer show-documentos"
              data-img={`${["partida-registral"]}`}>(Ver documento)</span
            >
          </li>
          <li>Saneamiento legal</li>
          <li>
            Cumplimiento de regulaciones
            <span
              class="text-secondary uppercase text-xs cursor-pointer show-documentos"
              data-img={`${["cira","maritima-nacional"]}`}>(Ver documentos)</span
            >
          </li>
          <li>Licencia de Habilitación urbana
            <span
              class="text-secondary uppercase text-xs cursor-pointer show-documentos"
              data-img={`${["licencia-1","licencia-2","licencia-3","licencia-4"]}`}>(Ver documento)</span
            >
          </li>
          <li>Factibilidad de servicios básicos de luz
            <span
              class="text-secondary uppercase text-xs cursor-pointer show-documentos"
              data-img={`${["factibilidad-seal"]}`}>(Ver documento)</span
            >
          </li>
          <li>Factibilidad de servicio de agua de reservorio a domicilio</li>
        </ul>
      </div>
    </div>
    <div class="p-5 md:p-10 animation-bottom">
      <div class="relative aspect-[5/3.3]">
        <button
          type="button"
          class="absolute top-1/2 left-1/2 -ml-[40px] -mt-[40px] w-20 h-20 flex items-center justify-center text-white rounded-full border border-white/80 anim-ping show-video-etapa"
        >
          <span
            class="w-16 h-16 bg-white/60 rounded-full flex items-center justify-center"
          >
            <svg
              class="w-8 ml-1 text-zinc-300"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              ><path
                d="M17.284 11.134a1 1 0 0 1 0 1.732L6.716 18.967a1 1 0 0 1-1.5-.866V5.9a1 1 0 0 1 1.5-.866l10.568 6.101Z"
                fill="currentColor"></path></svg
            >
          </span>
        </button>
        <img
          src="/images/actividad-3.avif"
          alt="Segunda etapa"
          class="shadow-card"
          loading="lazy"
        />
      </div>
      <div class="p-5 mt-2">
        <span
          class="text-sm uppercase font-medium tracking-[0.2em] text-secondary"
          >En proceso</span
        >
        <h3
          class="font-normal mt-4 md:max-w-3xl leading-snug md:mx-auto text-accent text-[1.5rem]"
        >
          Segunda parte
        </h3>
        <p class="mt-5 text-[15px]">
          Una etapa decisiva para el avance del proyecto, ya que el movimiento
          de tierras y delimitación es sumamente importante para la culminación
          de las etapas siguientes, colocando los cimientos de nuestro increíble
          condominio.
        </p>
        <ul class="list-disc ml-5 mt-2 text-[15px]">
          <li>Conformación de vías de acceso y áreas urbanizadas</li>
          <li>Pórtico de ingreso y delimitación de áreas comunes</li>
        </ul>
      </div>
    </div>
    <div class="p-5 md:p-10 animation-bottom">
      <img src="/images/actividad-2.avif" alt="Tercera etapa" loading="lazy" />
      <div class="p-5 mt-2">
        <span
          class="text-sm uppercase font-medium tracking-[0.2em] text-secondary"
          >Próximamente</span
        >
        <h3
          class="font-normal mt-4 md:max-w-3xl leading-snug md:mx-auto text-accent text-[1.5rem]"
        >
          Tercera parte
        </h3>
        <p class="mt-5 text-[15px]">
          Siendo una de las últimas partes clave para la culminación, el acceso
          a servicios básicos convertirá a nuestro proyecto en un condominio
          urbano y totalmente habitable.
        </p>
        <ul class="list-disc ml-5 mt-2 text-[15px]">
          <li>Redes de agua y desagüe</li>
        </ul>
      </div>
    </div>
    <div class="p-5 md:p-10 animation-bottom">
      <img src="/images/actividad-4.avif" alt="Cuarta etapa" loading="lazy" />
      <div class="p-5 mt-2">
        <span
          class="text-sm uppercase font-medium tracking-[0.2em] text-secondary"
          >Próximamente</span
        >
        <h3
          class="font-normal mt-4 md:max-w-3xl leading-snug md:mx-auto text-accent text-[1.5rem]"
        >
          Cuarta parte
        </h3>
        <p class="mt-5 text-[15px]">
          La etapa que todos esperábamos, la entrega de los terrenos
          completamente independizados, con servicios y con todas las
          comodidades para que puedas vivir el sueño de despertar con una
          increíble vista a la playa y a orillas del mar.
        </p>
        <ul class="list-disc ml-5 mt-2 text-[15px]">
          <li>Conformidad Municipal</li>
          <li>Entrega a propietarios y titulación</li>
        </ul>
      </div>
    </div>
  </div>
</section>
<dialog
  id="alert-dialog-etapa"
  class="w-full h-screen bg-black/70 fixed top-0 z-10"
>
  <div class="relative w-full h-full">
    <video class="h-[95%] mt-5 mx-auto video-etapa" preload="metadata" controls>
      <source src="/video/segunda-etapa.webm" type="video/webm" />
      Your browser does not support the video tag.
    </video>
    <svg
      class="w-5 absolute top-5 right-5 z-10 cursor-pointer text-zinc-200 hover:text-white btn-close-etapa"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      ><path
        d="m21 21-9-9m0 0L3 3m9 9 9-9m-9 9-9 9"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"></path></svg
    >
  </div>
</dialog>

<dialog
  id="alert-primera-parte"
  class="w-full h-screen bg-black/70 fixed top-0 z-10"
>
  <div class="relative w-full h-full">
    <svg
      class="w-5 absolute top-5 right-5 z-10 cursor-pointer text-zinc-200 hover:text-white btn-close-primera-parte"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      ><path
        d="m21 21-9-9m0 0L3 3m9 9 9-9m-9 9-9 9"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"></path></svg
    >
    <div class="splide" id="slide-primera-parte">
      <div class="splide__arrows">
        <button class="splide__arrow splide__arrow--prev bg-accent">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            ><path
              d="M16.18 3.269a1 1 0 0 0-1.415 0L8.121 9.913a3 3 0 0 0-.001 4.242l6.57 6.575a1 1 0 1 0 1.415-1.414l-6.573-6.572a1 1 0 0 1 0-1.414l6.648-6.647a1 1 0 0 0 0-1.414Z"
              fill="currentColor"></path></svg
          >
        </button>
        <button class="splide__arrow splide__arrow--next">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            ><path
              d="M16.18 3.269a1 1 0 0 0-1.415 0L8.121 9.913a3 3 0 0 0-.001 4.242l6.57 6.575a1 1 0 1 0 1.415-1.414l-6.573-6.572a1 1 0 0 1 0-1.414l6.648-6.647a1 1 0 0 0 0-1.414Z"
              fill="currentColor"></path></svg
          >
        </button>
      </div>
      <div class="splide__track h-screen">
        <ul class="splide__list"></ul>
      </div>
    </div>
  </div>
</dialog>

<style>
  .shadow-card {
    box-shadow: 0px 0px 11px 3px rgba(251, 184, 88, 1);
    -webkit-box-shadow: 0px 0px 11px 3px rgba(251, 184, 88, 1);
    -moz-box-shadow: 0px 0px 11px 3px rgba(251, 184, 88, 1);
  }
  @keyframes ping {
    from {
      transform: none;
    }
    50% {
      transform: scale(1.1);
    }
    to {
      transform: none;
    }
  }
  .anim-ping {
    animation: ping 2s infinite;
  }
  .splide__arrow {
    background: #f08435;
    opacity: 1;
    color: white;
  }
  .splide__arrow:focus {
    outline: none;
  }
  .splide__arrow--prev {
    left: 10px;
  }
  .splide__arrow--next {
    right: 10px;
  }
  .splide__pagination {
    bottom: -1.5em;
  }
  .splide__pagination__page.is-active {
    background: #f08435;
  }
</style>

<script>
  const video = document.querySelector(".video-etapa");
  const showButton = document.querySelector(".show-video-etapa");
  const alertDialog = document.querySelector("#alert-dialog-etapa");
  const buttonClose = document.querySelector(".btn-close-etapa");

  showButton.addEventListener("click", function () {
    alertDialog.show();
    document.body.style.overflow = "hidden";
    video.play();
  });

  alertDialog.addEventListener("cancel", function () {
    document.body.style.overflow = "auto";
    video.load();
  });

  buttonClose?.addEventListener("click", () => {
    document.body.style.overflow = "auto";
    video?.pause();
    alertDialog.close();
  });

  import Splide from "@splidejs/splide";
  import "@splidejs/splide/css";

  const showDocumentos = document.querySelectorAll(".show-documentos");
  const alertDocumentos = document.querySelector("#alert-primera-parte");
  const buttonCloseDocumentos = document.querySelector(
    ".btn-close-primera-parte"
  );

  showDocumentos.forEach((element) => {
    element.addEventListener("click", function () {
      const img = element.getAttribute("data-img").split(",");
      splideGalleryPrimeraParte.remove( '.is-visible' );
      // const slideList = document.querySelector(".splide__list");
      // slideList.innerHTML = "";
      for (let i = 0; i < img.length; i++) {
        // const htmlSliderDocumentos = `<li class="splide__slide"><img src="/images/${img[i]}.png" alt="Familia disfrutando de la playa" class="h-[95vh] mx-auto"/></li>`
        // const htmlSliderDocumentos = `<li class="splide__slide bg-green-400"><div class="w-full h-full" style="width:100%;">HOLA</div></li>`
        splideGalleryPrimeraParte.add(
          `<li class="splide__slide is-visible"><img src="/images/${img[i]}.png" alt="Familia disfrutando de la playa" class="h-[98vh] mx-auto"/></li>`
        );
        // alertDocumentos.querySelector(".splide__list").innerHTML += htmlSliderDocumentos;
      }

      alertDocumentos.show();
      document.body.style.overflow = "hidden";
    });
  });

  buttonCloseDocumentos?.addEventListener("click", () => {
    document.body.style.overflow = "auto";
    alertDocumentos.close();
  });
  // showDocumentos.addEventListener("click", function () {
  //   alertDocumentos.show();
  //   document.body.style.overflow = "hidden";
  // });

  var splideGalleryPrimeraParte = new Splide("#slide-primera-parte", {
    type: "loop",
    autoplay: true,
    perPage: 1,
    focus: "center",
    classes: {
      pagination: "splide__pagination",
      page: "splide__pagination__page",
    },
  });

  splideGalleryPrimeraParte.mount();
</script>
