---
import menu from "@/data/menu.json";
const pathname = Astro.url.pathname;
---

<header class="border-b border-gray-400 absolute top-0 left-0 w-full z-10">
  <div class="flex justify-between items-center max-w-7xl mx-auto p-4">
    <a href="/" class="max-w-56">
      <img
        src="/images/logo.png"
        alt="Logotipo"
        class="w-full"
      />
    </a>
    <button
      class="bg-white p-2.5 w-11 h-11 text-black md:hidden"
      onclick="openMenuMobile()"
    >
      <svg
        viewBox="0 0 64 64"
        xmlns="http://www.w3.org/2000/svg"
        stroke-width="3"
        stroke="currentColor"
        fill="none"
        ><path d="M7.68 32h48.64M7.68 15.97h48.64M7.68 48.03h48.64"></path></svg
      >
    </button>
    <nav class="hidden md:block">
      <ul class="inline-flex gap-x-2 uppercase text-sm">
        {
          menu.map((item) => (
            <li
              class={`hover:bg-white hover:text-secondary transition-colors duration-300 text-white w-full ${pathname === item.url && "bg-white"}`}
            >
              <a href={item.url} class={`px-3 py-1 tracking-[0.1rem] block ${pathname === item.url && "text-secondary"}`}>
                {item.name}
              </a>
            </li>
          ))
        }
      </ul>
    </nav>
    <div
      class="h-screen bg-secondary w-[90%] fixed top-0 left-0 p-7 -translate-x-full transition-transform ease-in duration-500"
      id="menu-mobile"
    >
      <div class="flex justify-between items-center mt-7">
        <a href="/" class="max-w-36">
          <img
            src="https://kit.baliniz.com/malibu/wp-content/uploads/sites/60/2023/06/logo-1.png"
            alt="Logotipo"
            class="w-full"
          />
        </a>
        <button type="button" class="w-6 p-1" onclick="closeMenuMobile()">
          <svg
            class="text-hover"
            viewBox="0 0 64 64"
            xmlns="http://www.w3.org/2000/svg"
            stroke-width="3"
            stroke="currentColor"
            fill="none"
            ><path d="m8.06 8.06 47.35 47.88M55.94 8.06 8.59 55.94"></path></svg
          >
        </button>
      </div>
      <nav class="mt-5">
        <ul
          class="flex flex-col uppercase text-xs leading-none font-light"
        >
          {
            menu.map((item) => (
              <li
                class={`hover:bg-white hover:text-secondary text-white w-full ${pathname === item.url && "bg-white"}`}
              >
                <a href={item.url} class={`p-4 tracking-[0.1rem] block ${pathname === item.url && "text-secondary"}`}>
                  {item.name}
                </a>
              </li>
            ))
          }
        </ul>
      </nav>
    </div>
  </div>
</header>

<script is:inline>
    const menuMobile = document.querySelector("#menu-mobile");

    const openMenuMobile = () => {
      menuMobile.classList.remove("-translate-x-full");
    };

    const closeMenuMobile = () => {
      menuMobile.classList.add("-translate-x-full");
    };
</script>
